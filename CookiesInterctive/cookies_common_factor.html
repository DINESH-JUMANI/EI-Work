<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookies Bakery Problem</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .instructionBox {
            background-color: #3399ff;
            color: white;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .instruction {
            font-size: 20px;
            color: #fff;
            margin-bottom: 10px;
        }
        .cookie {
            display: inline-block;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            text-align: center;
            font-size: 24px;
            line-height: 50px;
            margin: 5px;
        }
        .chocolate {
            background-color: #8B4513;
            color: white;
        }
        .oatmeal {
            background-color: #DEB887;
            color: black;
        }
        .leftover {
            border: 2px solid red;
        }
        #inputNumber {
            padding: 10px;
            margin-bottom: 10px;
            border: 2px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }
        #checkButton {
            padding: 10px 20px;
            background-color: #4CAF50;
            border: none;
            color: white;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #checkButton:hover {
            background-color: #45a049;
        }
        .error {
            color: red;
            font-weight: bold;
        }
        .success {
            color: green;
            font-weight: bold;
        }
        .flash {
            animation: zoomInOut 1s infinite alternate;
        }
        @keyframes zoomInOut {
            0% {
                transform: scale(1);
            }
            100% {
                transform: scale(1.1);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="instructionBox">            
            <div class="instruction">Guess the number of cookies in each row at the bakery.</div>            
            <div class="instruction"><i>Press the "Check" button.</i></div>
        </div>
        <input type="number" id="inputNumber" placeholder="Enter a number">
        <button id="checkButton" onclick="checkGuess()">Check</button>
        <div id="chocolateRow">
            <div class="instruction">Chocolate Chip Cookies:</div>
            <div id="chocolateCookies"></div>
            <span id="chocolateLeft" class="error"></span>
        </div>
        <div id="oatmealRow">
            <div class="instruction">Oatmeal Raisin Cookies:</div>
            <div id="oatmealCookies"></div>
            <span id="oatmealLeft" class="error"></span>
        </div>
        <br>
        <div id="message" class="error"></div>
    </div>

    <script>
        // Function to get URL parameters
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Extract numbers from URL parameter
        var numbersParam = getUrlParameter('numbers');
        var numbers = numbersParam.split('|').map(Number);
        var chocolateCount = numbers[0];
        var oatmealCount = numbers[1];
        var showAnswer = getUrlParameter('showAnswer');
        var answer = getUrlParameter('answer') ? getUrlParameter('answer') : 0;

        function checkGuess() {
            
            var x = parseInt(document.getElementById("inputNumber").value);       
            var chocolateDiv = document.getElementById("chocolateCookies");
            var oatmealDiv = document.getElementById("oatmealCookies");
            var chocolateLeftSpan = document.getElementById("chocolateLeft");
            var oatmealLeftSpan = document.getElementById("oatmealLeft");
            var messageDiv = document.getElementById("message");

            if (isNaN(x) || x <= 0) {
                messageDiv.innerHTML = "<div class='error'>Please enter a valid positive number.</div>";
                chocolateDiv.innerHTML = "";
                oatmealDiv.innerHTML = "";
                chocolateLeftSpan.innerHTML = "";
                oatmealLeftSpan.innerHTML = "";
                return;
            }

            var chocolateRows = Math.floor(chocolateCount / x);
            var oatmealRows = Math.floor(oatmealCount / x);
            var chocolateLeft = chocolateCount % x;
            var oatmealLeft = oatmealCount % x;

            chocolateDiv.innerHTML = "";
            oatmealDiv.innerHTML = "";
            chocolateLeftSpan.innerHTML = "";
            oatmealLeftSpan.innerHTML = "";
            messageDiv.innerHTML = "";

            if (chocolateRows === 0 || oatmealRows === 0) {
                messageDiv.innerHTML = "<div class='error'>The number you entered does not allow arranging cookies in rows. Try making another guess.</div>";
                return;
            }
            if(oatmealLeft === 0 && chocolateLeft === 0) {
                messageDiv.innerHTML = "<div class='success'>Bingo! Is there also another way of doing the same and hence more than 1 answer? Try!</div>";
            }

            for (var i = 0; i < chocolateRows; i++) {
                var row = "";
                for (var j = 0; j < x; j++) {
                    row += "<div class='cookie chocolate'>C</div>";
                }
                chocolateDiv.innerHTML += row + "<br>";
            }
            var extraChocolate = chocolateCount % x; // Calculate the number of additional chocolate cookies
            for (var i = 0; i < extraChocolate; i++) { // Add extra chocolate cookies to the chocolateDiv
                chocolateDiv.innerHTML += "<div class='cookie chocolate flash leftover'>C</div>";
            }

            for (var i = 0; i < oatmealRows; i++) {
                var row = "";
                for (var j = 0; j < x; j++) {
                    row += "<div class='cookie oatmeal'>O</div>";
                }
                oatmealDiv.innerHTML += row + "<br>";
            }
            
            var extraOatmeal = oatmealCount % x; // Calculate the number of additional oatmeal cookies
            for (var i = 0; i < extraOatmeal; i++) { // Add extra oatmeal cookies to the oatmealDiv
                oatmealDiv.innerHTML += "<div class='cookie oatmeal flash leftover'>O</div>";
            }

            if (chocolateLeft !== 0) {
                chocolateLeftSpan.innerHTML = "Oops! The last row does not have same number of cookies as the rest. <br>" + x + " is not a factor of " + chocolateCount + ". Try another number.";
            }

            if (oatmealLeft !== 0) {
                oatmealLeftSpan.innerHTML = "Oops! The last row does not have same number of cookies as the rest. <br>" + x + " is not a factor of " + oatmealCount + ". Try another number.";
                //oatmealLeftSpan.innerHTML = "Oops! The last row is not complete." + x + " does not divide " + oatmealCount + " exactly. It is not a factor of " + oatmealCount + ". Note, " + oatmealLeft + " oatmeal raisin cookie(s) are left over. <br><b>All the rows do not have the same number of cookies.</b> Try another number.";
            }
        }

        if(showAnswer == 1){
            document.getElementById("inputNumber").value = answer;
            checkGuess();
        }

    </script>
</body>
</html>
